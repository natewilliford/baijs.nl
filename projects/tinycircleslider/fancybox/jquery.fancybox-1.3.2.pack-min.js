(function(aG){var ay,aq,ap,aD,aj,aC,ai,ax,am,al,au=0,aE={},aw=[],av=0,aF={},az=[],af=null,ao=new Image,ae=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,k=/[^\.]\.(swf)\s*$/i,ad,ac=1,an=0,ar="",at,aA,aB=false,ak=aG.extend(aG("<div/>")[0],{prop:0}),ab=aG.browser.msie&&aG.browser.version<7&&!window.XMLHttpRequest,aa=function(){aq.hide();ao.onerror=ao.onload=null;af&&af.abort();ay.empty()},U=function(){if(false===aE.onError(aw,au,aE)){aq.hide();aB=false}else{aE.titleShow=false;aE.width="auto";aE.height="auto";ay.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');ah()}},ag=function(){var a=aw[au],j,f,e,i,h,c;aa();aE=aG.extend({},aG.fn.fancybox.defaults,typeof aG(a).data("fancybox")=="undefined"?aE:aG(a).data("fancybox"));c=aE.onStart(aw,au,aE);if(c===false){aB=false}else{if(typeof c=="object"){aE=aG.extend(aE,c)}e=aE.title||(a.nodeName?aG(a).attr("title"):a.title)||"";if(a.nodeName&&!aE.orig){aE.orig=aG(a).children("img:first").length?aG(a).children("img:first"):aG(a)}if(e===""&&aE.orig&&aE.titleFromAlt){e=aE.orig.attr("alt")}j=aE.href||(a.nodeName?aG(a).attr("href"):a.href)||null;if(/^(?:javascript)/i.test(j)||j=="#"){j=null}if(aE.type){f=aE.type;if(!j){j=aE.content}}else{if(aE.content){f="html"}else{if(j){f=j.match(ae)?"image":j.match(k)?"swf":aG(a).hasClass("iframe")?"iframe":j.indexOf("#")===0?"inline":"ajax"}}}if(f){if(f=="inline"){a=j.substr(j.indexOf("#"));f=aG(a).length>0?"inline":"ajax"}aE.type=f;aE.href=j;aE.title=e;if(aE.autoDimensions&&aE.type!=="iframe"&&aE.type!=="swf"){aE.width="auto";aE.height="auto"}if(aE.modal){aE.overlayShow=true;aE.hideOnOverlayClick=false;aE.hideOnContentClick=false;aE.enableEscapeButton=false;aE.showCloseButton=false}aE.padding=parseInt(aE.padding,10);aE.margin=parseInt(aE.margin,10);ay.css("padding",aE.padding+aE.margin);aG(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){aG(this).replaceWith(aC.children())});switch(f){case"html":ay.html(aE.content);ah();break;case"inline":if(aG(a).parent().is("#fancybox-content")===true){aB=false;break}aG('<div class="fancybox-inline-tmp" />').hide().insertBefore(aG(a)).bind("fancybox-cleanup",function(){aG(this).replaceWith(aC.children())}).bind("fancybox-cancel",function(){aG(this).replaceWith(ay.children())});aG(a).appendTo(ay);ah();break;case"image":aB=false;aG.fancybox.showActivity();ao=new Image;ao.onerror=function(){U()};ao.onload=function(){aB=true;ao.onerror=ao.onload=null;aE.width=ao.width;aE.height=ao.height;aG("<img />").attr({id:"fancybox-img",src:ao.src,alt:aE.title}).appendTo(ay);P()};ao.src=j;break;case"swf":i='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+aE.width+'" height="'+aE.height+'"><param name="movie" value="'+j+'"></param>';h="";aG.each(aE.swf,function(l,m){i+='<param name="'+l+'" value="'+m+'"></param>';h+=" "+l+'="'+m+'"'});i+='<embed src="'+j+'" type="application/x-shockwave-flash" width="'+aE.width+'" height="'+aE.height+'"'+h+"></embed></object>";ay.html(i);ah();break;case"ajax":aB=false;aG.fancybox.showActivity();aE.ajax.win=aE.ajax.success;af=aG.ajax(aG.extend({},aE.ajax,{url:j,data:aE.ajax.data||{},error:function(l){l.status>0&&U()},success:function(l,n,m){if(m.status==200){if(typeof aE.ajax.win=="function"){c=aE.ajax.win(j,l,n,m);if(c===false){aq.hide();return}else{if(typeof c=="string"||typeof c=="object"){l=c}}}ay.html(l);ah()}}}));break;case"iframe":P()}}else{U()}}},ah=function(){ay.width(aE.width);ay.height(aE.height);if(aE.width=="auto"){aE.width=ay.width()}if(aE.height=="auto"){aE.height=ay.height()}P()},P=function(){var a,c;aq.hide();if(aD.is(":visible")&&false===aF.onCleanup(az,av,aF)){aG.event.trigger("fancybox-cancel");aB=false}else{aB=true;aG(aC.add(ap)).unbind();aG(window).unbind("resize.fb scroll.fb");aG(document).unbind("keydown.fb");aD.is(":visible")&&aF.titlePosition!=="outside"&&aD.css("height",aD.height());az=aw;av=au;aF=aE;if(aF.overlayShow){ap.css({"background-color":aF.overlayColor,opacity:aF.overlayOpacity,cursor:aF.hideOnOverlayClick?"pointer":"auto",height:aG(document).height()});if(!ap.is(":visible")){ab&&aG("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});ap.show()}}else{ap.hide()}aC.get(0).scrollTop=0;aC.get(0).scrollLeft=0;aA=g();ar=aF.title||"";an=0;ax.empty().removeAttr("style").removeClass();if(aF.titleShow!==false){if(aG.isFunction(aF.titleFormat)){a=aF.titleFormat(ar,az,av,aF)}else{a=ar&&ar.length?aF.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+ar+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+aF.titlePosition+'">'+ar+"</div>":false}ar=a;if(!(!ar||ar==="")){ax.addClass("fancybox-title-"+aF.titlePosition).html(ar).appendTo("body").show();switch(aF.titlePosition){case"inside":ax.css({width:aA.width-aF.padding*2,marginLeft:aF.padding,marginRight:aF.padding});an=ax.outerHeight(true);ax.appendTo(aj);aA.height+=an;break;case"over":ax.css({marginLeft:aF.padding,width:aA.width-aF.padding*2,bottom:aF.padding}).appendTo(aj);break;case"float":ax.css("left",parseInt((ax.width()-aA.width-40)/2,10)*-1).appendTo(aD);break;default:ax.css({width:aA.width-aF.padding*2,paddingLeft:aF.padding,paddingRight:aF.padding}).appendTo(aD)}}}ax.hide();if(aD.is(":visible")){aG(ai.add(am).add(al)).hide();a=aD.position();at={top:a.top,left:a.left,width:aD.width(),height:aD.height()};c=at.width==aA.width&&at.height==aA.height;aC.fadeTo(aF.changeFade,0.3,function(){var e=function(){aC.html(ay.contents()).fadeTo(aF.changeFade,1,G)};aG.event.trigger("fancybox-change");aC.empty().removeAttr("filter").css({"border-width":aF.padding,width:aA.width-aF.padding*2,height:aF.type=="image"||aF.type=="swf"||aF.type=="iframe"?aA.height-an-aF.padding*2:"auto"});if(c){e()}else{ak.prop=0;aG(ak).animate({prop:1},{duration:aF.changeSpeed,easing:aF.easingChange,step:C,complete:e})}})}else{aD.removeAttr("style");aC.css("border-width",aF.padding);if(aF.transitionIn=="elastic"){at=w();aC.html(ay.contents());aD.show();if(aF.opacity){aA.opacity=0}ak.prop=0;aG(ak).animate({prop:1},{duration:aF.speedIn,easing:aF.easingIn,step:C,complete:G})}else{aF.titlePosition=="inside"&&an>0&&ax.show();aC.css({width:aA.width-aF.padding*2,height:aF.type=="image"||aF.type=="swf"||aF.type=="iframe"?aA.height-an-aF.padding*2:"auto"}).html(ay.contents());aD.css(aA).fadeIn(aF.transitionIn=="none"?0:aF.fadeIn,G)}}}},d=function(){if(aF.enableEscapeButton||aF.enableKeyboardNav){aG(document).bind("keydown.fb",function(a){if(a.keyCode==27&&aF.enableEscapeButton){a.preventDefault();aG.fancybox.close()}else{if((a.keyCode==37||a.keyCode==39)&&aF.enableKeyboardNav&&a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.target.tagName!=="SELECT"){a.preventDefault();aG.fancybox[a.keyCode==37?"prev":"next"]()}}})}if(aF.showNavArrows){if(aF.cyclic&&az.length>1||av!==0){am.show()}if(aF.cyclic&&az.length>1||av!=az.length-1){al.show()}}else{am.hide();al.hide()}},G=function(){if(!aG.support.opacity){aC.get(0).style.removeAttribute("filter");aD.get(0).style.removeAttribute("filter")}aD.css("height","auto");aF.type!=="image"&&aF.type!=="swf"&&aF.type!=="iframe"&&aC.css("height","auto");ar&&ar.length&&ax.show();aF.showCloseButton&&ai.show();d();aF.hideOnContentClick&&aC.bind("click",aG.fancybox.close);aF.hideOnOverlayClick&&ap.bind("click",aG.fancybox.close);aG(window).bind("resize.fb",aG.fancybox.resize);aF.centerOnScroll&&aG(window).bind("scroll.fb",aG.fancybox.center);if(aF.type=="iframe"){aG('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(aG.browser.msie?'allowtransparency="true""':"")+' scrolling="'+aE.scrolling+'" src="'+aF.href+'"></iframe>').appendTo(aC)}aD.show();aB=false;aG.fancybox.center();aF.onComplete(az,av,aF);var a,c;if(az.length-1>av){a=az[av+1].href;if(typeof a!=="undefined"&&a.match(ae)){c=new Image;c.src=a}}if(av>0){a=az[av-1].href;if(typeof a!=="undefined"&&a.match(ae)){c=new Image;c.src=a}}},C=function(a){var c={width:parseInt(at.width+(aA.width-at.width)*a,10),height:parseInt(at.height+(aA.height-at.height)*a,10),top:parseInt(at.top+(aA.top-at.top)*a,10),left:parseInt(at.left+(aA.left-at.left)*a,10)};if(typeof aA.opacity!=="undefined"){c.opacity=a<0.5?0.5:a}aD.css(c);aC.css({width:c.width-aF.padding*2,height:c.height-an*a-aF.padding*2})},x=function(){return[aG(window).width()-aF.margin*2,aG(window).height()-aF.margin*2,aG(document).scrollLeft()+aF.margin,aG(document).scrollTop()+aF.margin]},g=function(){var a=x(),f={},e=aF.autoScale,c=aF.padding*2;f.width=aF.width.toString().indexOf("%")>-1?parseInt(a[0]*parseFloat(aF.width)/100,10):aF.width+c;f.height=aF.height.toString().indexOf("%")>-1?parseInt(a[1]*parseFloat(aF.height)/100,10):aF.height+c;if(e&&(f.width>a[0]||f.height>a[1])){if(aE.type=="image"||aE.type=="swf"){e=aF.width/aF.height;if(f.width>a[0]){f.width=a[0];f.height=parseInt((f.width-c)/e+c,10)}if(f.height>a[1]){f.height=a[1];f.width=parseInt((f.height-c)*e+c,10)}}else{f.width=Math.min(f.width,a[0]);f.height=Math.min(f.height,a[1])}}f.top=parseInt(Math.max(a[3]-20,a[3]+(a[1]-f.height-40)*0.5),10);f.left=parseInt(Math.max(a[2]-20,a[2]+(a[0]-f.width-40)*0.5),10);return f},w=function(){var a=aE.orig?aG(aE.orig):false,c={};if(a&&a.length){c=a.offset();c.top+=parseInt(a.css("paddingTop"),10)||0;c.left+=parseInt(a.css("paddingLeft"),10)||0;c.top+=parseInt(a.css("border-top-width"),10)||0;c.left+=parseInt(a.css("border-left-width"),10)||0;c.width=a.width();c.height=a.height();c={width:c.width+aF.padding*2,height:c.height+aF.padding*2,top:c.top-aF.padding-20,left:c.left-aF.padding-20}}else{a=x();c={width:aF.padding*2,height:aF.padding*2,top:parseInt(a[3]+a[1]*0.5,10),left:parseInt(a[2]+a[0]*0.5,10)}}return c},b=function(){if(aq.is(":visible")){aG("div",aq).css("top",ac*-40+"px");ac=(ac+1)%12}else{clearInterval(ad)}};aG.fn.fancybox=function(a){if(!aG(this).length){return this}aG(this).data("fancybox",aG.extend({},a,aG.metadata?aG(this).metadata():{})).unbind("click.fb").bind("click.fb",function(c){c.preventDefault();if(!aB){aB=true;aG(this).blur();aw=[];au=0;c=aG(this).attr("rel")||"";if(!c||c==""||c==="nofollow"){aw.push(this)}else{aw=aG("a[rel="+c+"], area[rel="+c+"]");au=aw.index(this)}ag()}});return this};aG.fancybox=function(a,h){var e;if(!aB){aB=true;e=typeof h!=="undefined"?h:{};aw=[];au=parseInt(e.index,10)||0;if(aG.isArray(a)){for(var c=0,f=a.length;c<f;c++){if(typeof a[c]=="object"){aG(a[c]).data("fancybox",aG.extend({},e,a[c]))}else{a[c]=aG({}).data("fancybox",aG.extend({content:a[c]},e))}}aw=jQuery.merge(aw,a)}else{if(typeof a=="object"){aG(a).data("fancybox",aG.extend({},e,a))}else{a=aG({}).data("fancybox",aG.extend({content:a},e))}aw.push(a)}if(au>aw.length||au<0){au=0}ag()}};aG.fancybox.showActivity=function(){clearInterval(ad);aq.show();ad=setInterval(b,66)};aG.fancybox.hideActivity=function(){aq.hide()};aG.fancybox.next=function(){return aG.fancybox.pos(av+1)};aG.fancybox.prev=function(){return aG.fancybox.pos(av-1)};aG.fancybox.pos=function(a){if(!aB){a=parseInt(a);aw=az;if(a>-1&&a<az.length){au=a;ag()}else{if(aF.cyclic&&az.length>1){au=a>=az.length?0:az.length-1;ag()}}}};aG.fancybox.cancel=function(){if(!aB){aB=true;aG.event.trigger("fancybox-cancel");aa();aE.onCancel(aw,au,aE);aB=false}};aG.fancybox.close=function(){function a(){ap.fadeOut("fast");ax.empty().hide();aD.hide();aG.event.trigger("fancybox-cleanup");aC.empty();aF.onClosed(az,av,aF);az=aE=[];av=au=0;aF=aE={};aB=false}if(!(aB||aD.is(":hidden"))){aB=true;if(aF&&false===aF.onCleanup(az,av,aF)){aB=false}else{aa();aG(ai.add(am).add(al)).hide();aG(aC.add(ap)).unbind();aG(window).unbind("resize.fb scroll.fb");aG(document).unbind("keydown.fb");aC.find("iframe").attr("src",ab&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");aF.titlePosition!=="inside"&&ax.empty();aD.stop();if(aF.transitionOut=="elastic"){at=w();var c=aD.position();aA={top:c.top,left:c.left,width:aD.width(),height:aD.height()};if(aF.opacity){aA.opacity=1}ax.empty().hide();ak.prop=1;aG(ak).animate({prop:0},{duration:aF.speedOut,easing:aF.easingOut,step:C,complete:a})}else{aD.fadeOut(aF.transitionOut=="none"?0:aF.speedOut,a)}}}};aG.fancybox.resize=function(){ap.is(":visible")&&ap.css("height",aG(document).height());aG.fancybox.center(true)};aG.fancybox.center=function(a){var e,c;if(!aB){c=a===true?1:0;e=x();!c&&(aD.width()>e[0]||aD.height()>e[1])||aD.stop().animate({top:parseInt(Math.max(e[3]-20,e[3]+(e[1]-aC.height()-40)*0.5-aF.padding)),left:parseInt(Math.max(e[2]-20,e[2]+(e[0]-aC.width()-40)*0.5-aF.padding))},typeof a=="number"?a:200)}};aG.fancybox.init=function(){if(!aG("#fancybox-wrap").length){aG("body").append(ay=aG('<div id="fancybox-tmp"></div>'),aq=aG('<div id="fancybox-loading"><div></div></div>'),ap=aG('<div id="fancybox-overlay"></div>'),aD=aG('<div id="fancybox-wrap"></div>'));aj=aG('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(aD);aj.append(aC=aG('<div id="fancybox-content"></div>'),ai=aG('<a id="fancybox-close"></a>'),ax=aG('<div id="fancybox-title"></div>'),am=aG('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),al=aG('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));ai.click(aG.fancybox.close);aq.click(aG.fancybox.cancel);am.click(function(a){a.preventDefault();aG.fancybox.prev()});al.click(function(a){a.preventDefault();aG.fancybox.next()});aG.fn.mousewheel&&aD.bind("mousewheel.fb",function(a,c){a.preventDefault();aG.fancybox[c>0?"prev":"next"]()});aG.support.opacity||aD.addClass("fancybox-ie");if(ab){aq.addClass("fancybox-ie6");aD.addClass("fancybox-ie6");aG('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(aj)}}};aG.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};aG(document).ready(function(){aG.fancybox.init()})})(jQuery);